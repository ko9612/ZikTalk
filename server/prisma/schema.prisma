generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         String      @id @default(cuid())
  name       String
  email      String      @unique
  password   String
  role       String
  career     Int
  createdAt  DateTime    @default(now()) @db.Timestamptz(6)
  interviews Interview[]
  questions  Question[]
}

model Interview {
  id               String     @id @default(cuid())
  userId           String
  role             String
  totalScore       Int
  summary          String
  strengths        String
  improvements     String
  personalityScore Int
  personalityEval  String
  jobScore         Int
  jobEval          String
  createdAt        DateTime   @default(now()) @db.Timestamptz(6)
  bookmarked       Boolean
  user             User       @relation(fields: [userId], references: [id])
  questions        Question[]
}

model Question {
  id          String       @id @default(cuid())
  interviewId String
  order       Int
  type        QuestionType
  content     String
  myAnswer    String
  videoUrl    String?
  recommended String
  bookmarked  Boolean
  userId      String
  interview   Interview    @relation(fields: [interviewId], references: [id])
  user        User         @relation(fields: [userId], references: [id])
}

enum QuestionType {
  PERSONALITY
  JOB
}

model EmailAuth {
  id         Int      @id @default(autoincrement())
  authCode      String   @unique
  userId     String
  expiresAt  DateTime
  createdAt  DateTime    @default(now()) @db.Timestamptz(6)
}